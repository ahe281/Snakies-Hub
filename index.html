<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snakies' Hub - Fresh Lemonade Delivered</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
/* ------------------- BASE STYLES ------------------- */
* { margin:0; padding:0; box-sizing:border-box; }
:root {
  --primary:#FFD700; --primary-dark:#FFC700; --text:#fff; --text-light:#a0a0a0;
  --border:rgba(255,255,255,0.1); --bg:rgba(20,20,30,0.95); --bg-light:rgba(30,30,45,0.9);
  --shadow:rgba(0,0,0,0.3); --success:#00ff88; --error:#ff4466;
  --card-bg:rgba(255,255,255,0.05); --card-hover:rgba(255,255,255,0.08);
}
body {
  font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;
  background:linear-gradient(135deg,#0a0e27 0%,#1a1f3a 50%,#0f1419 100%);
  color:var(--text); line-height:1.6; -webkit-font-smoothing:antialiased;
  position:relative; overflow-x:hidden;
}
/* ------------------- STARS ------------------- */
#stars-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;}
.container{position:relative; z-index:1;}
header, .modal, .admin-header, .hero, .products, footer, .toast{position:relative; z-index:1;}
.container{max-width:1200px; margin:0 auto; padding:0 24px;}
/* HEADER */
header{border-bottom:1px solid var(--border); background:var(--bg); position:sticky; top:0; z-index:100; backdrop-filter:blur(20px);}
.header-content{display:flex; justify-content:space-between; align-items:center; padding:20px 0;}
.logo{font-size:24px; font-weight:700; color:var(--text); letter-spacing:-0.5px;}
.logo span{color:var(--primary-dark);}
.cart-icon{position:relative; padding:10px 20px; background:var(--card-bg); border-radius:50px; cursor:pointer; transition:all 0.3s ease; border:1px solid var(--border); font-size:14px; font-weight:500; backdrop-filter:blur(10px);}
.cart-icon:hover{background:var(--primary); border-color:var(--primary); color:#000; transform:translateY(-2px);}
.cart-count{position:absolute; top:-5px; right:-5px; background:var(--text); color:white; border-radius:50%; width:20px; height:20px; display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:600;}
/* HERO */
.hero{text-align:center; padding:120px 0 80px; background:transparent; position:relative;}
.hero::before{content:''; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:600px; height:600px; background:radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%); pointer-events:none; animation:glow 4s ease-in-out infinite;}
@keyframes glow{0%,100%{opacity:0.5; transform:translate(-50%,-50%) scale(1);} 50%{opacity:0.8; transform:translate(-50%,-50%) scale(1.1);}}
.hero h1{font-size:64px; font-weight:700; margin-bottom:16px; letter-spacing:-2px; line-height:1.1; background:linear-gradient(135deg,#fff 0%,var(--primary) 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;}
.hero p{font-size:18px; color:var(--text-light); max-width:500px; margin:0 auto 32px;}
.status-badge{display:inline-flex; align-items:center; gap:8px; padding:8px 16px; background:#e8f5e9; border-radius:50px; font-size:14px; color:var(--success); font-weight:500;}
.status-dot{width:8px; height:8px; background:var(--success); border-radius:50%; animation:pulse 2s infinite;}
@keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.5;}}

/* PRODUCTS */
.products{padding:60px 0;}
.section-title{font-size:32px; font-weight:700; margin-bottom:40px; letter-spacing:-1px;}
.product-grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:32px;}
.product-card{background:var(--card-bg); border:1px solid var(--border); border-radius:20px; overflow:hidden; transition:all 0.4s ease; cursor:pointer; backdrop-filter:blur(20px);}
.product-card:hover{transform:translateY(-8px); box-shadow:0 20px 60px rgba(255,215,0,0.2); border-color:var(--primary); background:var(--card-hover);}
.product-image{width:100%; height:240px; object-fit:cover; background:var(--bg-light);}
.product-info{padding:24px;}
.product-name{font-size:18px; font-weight:600; margin-bottom:8px;}
.product-desc{font-size:14px; color:var(--text-light); margin-bottom:16px; line-height:1.5;}
.product-footer{display:flex; justify-content:space-between; align-items:center;}
.product-price{font-size:24px; font-weight:700;}
.add-btn{padding:10px 24px; background:var(--text); color:white; border:none; border-radius:50px; font-size:14px; font-weight:600; cursor:pointer; transition:all 0.3s ease;}
.add-btn:hover{background:var(--primary-dark); color:var(--text); transform:scale(1.05);}

/* MODAL (Cart & Admin) */
.modal-overlay{position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); backdrop-filter:blur(4px); display:none; align-items:center; justify-content:center; z-index:1000; animation:fadeIn 0.3s ease;}
.modal-overlay.active{display:flex;}
.modal{background:var(--bg); border:1px solid var(--border); border-radius:24px; width:90%; max-width:480px; max-height:90vh; overflow-y:auto; animation:slideUp 0.3s ease; box-shadow:0 20px 60px rgba(0,0,0,0.5); backdrop-filter:blur(20px);}
@keyframes slideUp{from{transform:translateY(30px);opacity:0;}to{transform:translateY(0);opacity:1;}}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
.modal-header{padding:32px 32px 24px; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center;}
.modal-title{font-size:24px; font-weight:700;}
.close-btn{background:none; border:none; font-size:28px; cursor:pointer; color:var(--text-light); width:32px; height:32px; display:flex; align-items:center; justify-content:center; border-radius:50%; transition:all 0.2s;}
.close-btn:hover{background:var(--bg-light); color:var(--text);}
.modal-body{padding:32px;}
.cart-empty{text-align:center; padding:60px 20px; color:var(--text-light);}
.cart-empty-icon{font-size:64px; margin-bottom:16px; opacity:0.3;}
.cart-item{display:flex; gap:16px; padding:20px 0; border-bottom:1px solid var(--border);}
.cart-item:last-child{border-bottom:none;}
.cart-item-info{flex:1;}
.cart-item-name{font-weight:600; margin-bottom:4px;}
.cart-item-price{color:var(--text-light); font-size:14px;}
.qty-controls{display:flex; align-items:center; gap:12px; margin-top:12px;}
.qty-btn{width:32px; height:32px; border:1px solid var(--border); background:white; border-radius:50%; cursor:pointer; font-size:18px; display:flex; align-items:center; justify-content:center; transition:all 0.2s;}
.qty-btn:hover{background:var(--bg-light); border-color:var(--text);}
.qty-display{font-weight:600; min-width:20px; text-align:center;}
.cart-item-total{font-weight:700; font-size:18px;}
.remove-btn{background:none; border:none; color:var(--error); cursor:pointer; font-size:14px; padding:4px 8px; border-radius:4px; transition:all 0.2s;}
.remove-btn:hover{background:#ffebee;}
.cart-summary{margin-top:24px; padding-top:24px; border-top:2px solid var(--border);}
.summary-row{display:flex; justify-content:space-between; margin-bottom:12px; color:var(--text-light);}
.summary-total{display:flex; justify-content:space-between; font-size:20px; font-weight:700; margin-top:16px; padding-top:16px; border-top:1px solid var(--border);}
.checkout-form{margin-top:32px;}
.form-group{margin-bottom:20px;}
label{display:block; margin-bottom:8px; font-weight:500; font-size:14px;}
input, select{width:100%; padding:12px 16px; border:1px solid var(--border); border-radius:12px; font-size:15px; font-family:inherit; transition:all 0.2s;}
input:focus, select:focus{outline:none; border-color:var(--text); box-shadow:0 0 0 3px rgba(0,0,0,0.05);}
.primary-btn{width:100%; padding:16px; background:var(--text); color:white; border:none; border-radius:12px; font-size:16px; font-weight:600; cursor:pointer; transition:all 0.3s ease;}
.primary-btn:hover{background:var(--primary-dark); color:var(--text); transform:translateY(-2px); box-shadow:0 8px 20px var(--shadow);}
footer{text-align:center; padding:40px 0; color:var(--text-light); font-size:14px; border-top:1px solid var(--border); margin-top:80px;}
@media(max-width:768px){.hero h1{font-size:36px;}.product-grid{grid-template-columns:1fr;}.admin-actions{flex-direction:column;}.admin-btn{width:100%;}}
</style>
</head>
<body>
<div id="app"></div>
<canvas id="stars-canvas"></canvas>

<script type="module">
// ===================== FIREBASE INIT =====================
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getFirestore, collection, doc, getDoc, setDoc, getDocs, updateDoc, deleteDoc, onSnapshot, query, orderBy } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

const firebaseConfig = {
  apiKey:"AIzaSyDMsWEJ8bkJyEWZvghR-wTf40rRYjFcYz0",
  authDomain:"snakies-hub-fe539.firebaseapp.com",
  projectId:"snakies-hub-fe539",
  storageBucket:"snakies-hub-fe539.firebasestorage.app",
  messagingSenderId:"745587118063",
  appId:"1:745587118063:web:21f86894e1d1139eb7701a"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ===================== STARS =====================
const canvas = document.getElementById('stars-canvas');
const ctx = canvas.getContext('2d');
let stars=[], mouseX=0, mouseY=0;

function resizeCanvas(){canvas.width=window.innerWidth; canvas.height=window.innerHeight;}
class Star{constructor(){this.x=Math.random()*canvas.width; this.y=Math.random()*canvas.height; this.z=Math.random()*1000; this.size=Math.random()*2; this.speedX=(Math.random()-0.5)*0.5; this.speedY=(Math.random()-0.5)*0.5;}
update(){const parallaxX=(mouseX-canvas.width/2)*0.01; const parallaxY=(mouseY-canvas.height/2)*0.01; this.x+=this.speedX+(parallaxX*(1000-this.z)/1000); this.y+=this.speedY+(parallaxY*(1000-this.z)/1000);
if(this.x<0)this.x=canvas.width;if(this.x>canvas.width)this.x=0;if(this.y<0)this.y=canvas.height;if(this.y>canvas.height)this.y=0;}
draw(){const depth=1-(this.z/1000); const size=this.size*depth; const opacity=depth*0.8; ctx.beginPath(); ctx.arc(this.x,this.y,size,0,Math.PI*2);
ctx.fillStyle=(Math.random()>0.95)?`rgba(255,215,0,${opacity})`:`rgba(255,255,255,${opacity})`; ctx.fill();
ctx.shadowBlur=(Math.random()>0.98)?10:0; ctx.shadowColor='rgba(255,215,0,0.8)';}}
function initStars(){resizeCanvas(); stars=[]; for(let i=0;i<200;i++){stars.push(new Star());}}
function animateStars(){ctx.clearRect(0,0,canvas.width,canvas.height); stars.forEach(s=>{s.update(); s.draw();}); requestAnimationFrame(animateStars);}
document.addEventListener('mousemove',(e)=>{mouseX=e.clientX; mouseY=e.clientY;});
window.addEventListener('resize',resizeCanvas); initStars(); animateStars();

// ===================== APP =====================
let cart=[]; const DELIVERY_FEE=10;
const urlParams=new URLSearchParams(window.location.search);
const isAdminMode=urlParams.get('key')==='snakiesboss';

if(isAdminMode){initAdminMode();}else{initCustomerMode();}

// -------------------- HELPER FUNCTIONS --------------------
function showToast(msg,type){const t=document.createElement('div');t.className=`toast ${type||''}`;t.innerText=msg; document.body.appendChild(t); setTimeout(()=>{t.remove();},3000);}
function saveCart(){localStorage.setItem('snakiesCart',JSON.stringify(cart));}
function loadCart(){cart=JSON.parse(localStorage.getItem('snakiesCart')||'[]');}

// -------------------- CUSTOMER MODE --------------------
function initCustomerMode(){loadCart(); renderCustomerApp();}
function renderCustomerApp(){document.getElementById('app').innerHTML=`<header class="container header-content">
<div class="logo">Snakies<span>'</span> Hub</div>
<div class="cart-icon" onclick="window.openCart()">
üõí Cart <span class="cart-count" id="cartCount">0</span>
</div>
</header>
<section class="hero"><div class="container">
<h1>Fresh Lemonade,<br>Delivered to Your Door</h1>
<p>Handcrafted with love, delivered with care. Premium lemonades made fresh daily.</p>
<div class="status-badge"><div class="status-dot"></div><span>Open for orders</span></div>
</div></section>
<section class="products"><div class="container">
<h2 class="section-title">Our Menu</h2><div class="product-grid">
<div class="product-card" onclick="window.addToCart('Classic Lemonade',20)">
<img src="https://images.unsplash.com/photo-1524594154908-edd23d6e8a8b?w=400" class="product-image">
<div class="product-info"><div class="product-name">Classic Lemonade</div><div class="product-desc">Freshly squeezed lemons with the perfect balance of sweet and tangy</div>
<div class="product-footer"><div class="product-price">‚Çπ20</div><button class="add-btn">Add to Cart</button></div></div></div>
<!-- Add more products similarly -->
</div></div></section>
<footer><div class="container">Made with ‚ù§Ô∏è by Abhinav & Team</div></footer>
<div class="modal-overlay" id="cartModal"><div class="modal">
<div class="modal-header"><div class="modal-title">Your Cart</div><button class="close-btn" onclick="window.closeCart()">√ó</button></div>
<div class="modal-body"><div id="cartItems"></div><div id="cartSummary" style="display:none;"></div></div></div></div>`; updateCart();}

// -------------------- CART --------------------
window.addToCart=function(name,price){const existing=cart.find(i=>i.name===name);if(existing){existing.qty++;}else{cart.push({name,price,qty:1});} saveCart(); updateCart(); showToast(`${name} added to cart!`,'success');}
window.updateQuantity=function(name,change){const item=cart.find(i=>i.name===name);if(item){item.qty+=change;if(item.qty<=0)cart=cart.filter(x=>x.name!==name);} saveCart(); updateCart();}
window.removeItem=function(name){cart=cart.filter(i=>i.name!==name); saveCart(); updateCart();}
window.openCart=function(){document.getElementById('cartModal').classList.add('active');}
window.closeCart=function(){document.getElementById('cartModal').classList.remove('active');}
function updateCart(){const itemsContainer=document.getElementById('cartItems'); const summary=document.getElementById('cartSummary'); itemsContainer.innerHTML=''; if(cart.length===0){itemsContainer.innerHTML='<div class="cart-empty"><div class="cart-empty-icon">üõí</div>Your cart is empty</div>'; summary.style.display='none';} else{cart.forEach(i=>{itemsContainer.innerHTML+=`<div class="cart-item"><div class="cart-item-info"><div class="cart-item-name">${i.name}</div><div class="cart-item-price">‚Çπ${i.price}</div><div class="qty-controls"><button class="qty-btn" onclick="updateQuantity('${i.name}',-1)">-</button><div class="qty-display">${i.qty}</div><button class="qty-btn" onclick="updateQuantity('${i.name}',1)">+</button></div></div><button class="remove-btn" onclick="removeItem('${i.name}')">Remove</button></div>`}); let total=cart.reduce((a,b)=>a+b.price*b.qty,0); summary.style.display='block'; summary.innerHTML=`<div class="cart-summary"><div class="summary-row"><span>Subtotal</span><span>‚Çπ${total}</span></div><div class="summary-row"><span>Delivery</span><span>‚Çπ${DELIVERY_FEE}</span></div><div class="summary-total"><span>Total</span><span>‚Çπ${total+DELIVERY_FEE}</span></div></div>`;}document.getElementById('cartCount').innerText=cart.reduce((a,b)=>a+b.qty,0);}

// -------------------- ADMIN MODE --------------------
async function fetchAdminHash(){const docSnap=await getDoc(doc(db,'settings','adminPassword')); if(!docSnap.exists())throw new Error('Admin password not set'); return docSnap.data().hash;}
function simpleHash(str){let h=0; for(let i=0;i<str.length;i++){h=(h<<5)-h+str.charCodeAt(i); h|=0;} return h.toString();}
function initAdminMode(){document.getElementById('app').innerHTML=`<section class="container" style="padding:100px 0; text-align:center;">
<h1>Admin Login</h1>
<form onsubmit="verifyAdminPassword(event)" style="max-width:320px;margin:50px auto;">
<input type="password" id="adminPassword" placeholder="Enter password" required style="width:100%;padding:12px;margin-bottom:16px;border-radius:12px;border:1px solid #ccc;">
<button type="submit" class="primary-btn">Login</button>
</form></section>`;}
window.verifyAdminPassword=async function(e){e.preventDefault(); const val=document.getElementById('adminPassword').value;
try{const hash=await fetchAdminHash(); if(simpleHash(val)===hash){sessionStorage.setItem('adminAuth','true'); renderAdminPanel(); showToast('Welcome, Admin!','success');}else{showToast('Incorrect password!','error'); document.getElementById('adminPassword').value='';}}catch(err){console.error(err); showToast('Error fetching password','error');}}
function renderAdminPanel(){document.getElementById('app').innerHTML=`<header class="container header-content"><div class="logo">Snakies<span>'</span> Admin</div></header><section class="container" style="padding:40px;"><h2>Live Orders</h2><div id="adminOrders"></div></section>`; startAdminLiveUpdates();}
async function startAdminLiveUpdates(){const ordersCol=collection(db,'orders'); onSnapshot(query(ordersCol, orderBy('timestamp','desc')),(snap)=>{const ordersDiv=document.getElementById('adminOrders'); ordersDiv.innerHTML=''; snap.forEach(doc=>{const o=doc.data(); ordersDiv.innerHTML+=`<div style="padding:16px;border:1px solid var(--border);margin-bottom:12px;border-radius:12px;"><b>${o.name}</b> - ‚Çπ${o.total}<br>${o.items.map(i=>i.name+' x'+i.qty).join(', ')}<br>${o.address}</div>`});});}

</script>
</body>
</html>
